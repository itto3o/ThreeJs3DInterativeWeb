커스텀 3D 모델 포맷

지금까지ㅡㄴ three.js에서 기본적으로 제공하는 geometry, box들을 사용했었는데, 이번 섹션에서는 커스텀 모델,
3D 모델링을 하고 three.js에서 갖다 쓰기

glTF : 3D 모델 포맷 중 하나, 3차원 장면과 모델을 표현하는 파일 포맷으로 JSON 표준에 기반하고 있다.
카메라, 애니메이션, 3D 모델 등이 포함되어 있음
요즘에는 glTF가 표준처럼 되어서 가장 널리 쓰이고 있음

glb : glTF를 바이너리 파일로 갖고 있는 파일

블랜더를 통해 3D 모델을 만들고 glTF파일을 glb로 만든 다음에 three.js에서 사용할 것

glTF샘플들을 찾아보기
--> 사람들이 만들어놓은걸 제공하는 것도 있음, 들어가면 glTF로도 제공을 함, 다운받아서 three.js에서 불러와서 장면에 사용 가능
미리 누가 만들어놓은걸 쓸 일은 별로 없음,직접 만들 수 있으면 좋을듯
디테일하게 잘 만들어놨지만, 웹사이트를 만들땐 너무 디테일한 것들을 사용하면 용량이 너무 커서 오히려 3D모델링으로 만들어보는게 간단해서 좋음


-----------------------------
블렌더 소개

blender는 공짜, 전세계에 굉장히 많은 사람들이 사용하고 있고, 다운로드하면 됨

블렌더 기능은 굉장히 많고, 인터페이스도 되게 복잡함


----------------------------
블렌더를 열어보면 화면이 나옴

기존 시작 상태,

패널조작하기
패널들이 여러개 떠있는데, 창이 많이 떠있음
위, 아래, 양옆 등,

아래꺼를 올려보고 오른쪽도 늘릴 수 있음


각 패널들은 왼쪽 위의 눌러서 3D Viewport가 지금의 기본 상태, 다른 것들을 눌러서 다른 것도 가능
각 다른 패널마다 다른 애들이 선택되어 있음
다른 패널에 여기에 3D ViewPort를 선택하면 똑같은 화면이 보임

다른 각도로 보고 싶을때 활용 가능

각 패널들을 추가하고 삭제
추가하는 건 패널의 끝에 커서를 가져가면 십자모양의 커서가 되는데, 이 상태에서 아래로 드래그 하면 패널이 새로 하나 생김
옆으로도 가능함

삭제는 방향이 반대, 패널 귀퉁이에서 아래쪽으로 하면 새로 생기고, 위로 하면 위와 합쳐짐
위에껄로 아래걸 합치려면
아래 귀퉁이에서 아래로 내리면 밑에꺼가 없어짐

그냥 위에서 아래로 하면 생기고, 아래에서 위로 하면 합쳐지네



--------------------------------------
마우스/트랙패드 컨ㅌ롤

기본으로 된 3d 뷰포트 패널에서 기본적인 모델링 작업을 할 것
돌려가면서 보고싶다면,
마우스 휠클릭 + 드래그를 하면 회전이 가능함
휠을 돌리면 확대/축소
시점을 이동시키려면 shift+휠 클릭+ 드래그

회전을 할때마다 축도 같이 회전해줌
정확한 정면, 윗면을 보고싶다면 오른쪽 위의 축의 z를 누르면 위에서 보게 됨

blender에서는 z가 위, x가 좌, y가 앞뒤

정면 모습을 보고 싶다면
y의 반대쪽 하얀 동그라미를 클리갛면 되고,
y는 실제로 화면 뒤쪽을 나타내서 음영이 다름



-----------------------------------------
3D 뷰포트 패널

기본적으로 3D 뷰포트패널에서 3D모델링을 함,큐브 형태의  mesh하나가 있음
light, camera도 있음

three.js와 독립적임, 렌더링된 결과물이 카메라가 촬영된 영상이 나옴
--> 우리는 모델만 필요하니까 camera, light는 삭제하면됨, outliner패널에서 delete해도 되고, 단축키 X를 하면 바로 삭제 됨
얘를 export해서 three.js에서 사용하는 것

3d 뷰포트 패널의 오른쪽 상단에 동그라미 4개가 있는데, 지금 선택된 거는 메쉬 형태를 보여줌, 와이어 프레임만 보여주는 것도 있고, material이 적용된 애도 보여주는 것도 있고, 마지막은 최종적으로 렌더링 된 것(조명을 삭제해버려서 없는 것처러 ㅁ보이는데 조명이 있으면 좀 밝아보임)

왼쪽 툴들은 얘를 감축려면 T, 오른쪽에 탭을 빼려면 N


-----------------------
메쉬의 크기, 추가/삭제

박스 mesh를 정면뷰로 보면, 한칸이 1이라고 생각하면 됨 --> 단위가 따로 없고, thee.js에서 똑같은 단위
정육면체고, 각 변의 길이가 2인 애
없애고 새롭게 만들 수 있음
삭제는 X, 추가는 좌상단의 Add/Mesh/원하는 형태
OR 단축키(shift+A)누르면 Add 생김, UV Sphere 만들기
plane도 추가

three.js는 plane이 세워져잇었는데 지금은 누워있음

모두 삭제 후 다시 큐브 메쉬 생성



---------------------------------
Object모드와 Edit 모드

왼쪽위에 select box가 하나 있는데, object mode로 default로 설정되어 있음
mesh를 선택하면 메쉬 테두리가 오랜지색으로 나옴,
이 선택한 메쉬의 정보를 보려면 우측 하단 패널에 네모 탭을 누르면 됨
transform, rotation, scale 등의 정보도 볼 수 있음
움직일 수 있는데, 얘를 움직이면 메쉬가 직접 움직임

이 상태에서 EditMode로 들어감(tab으로)
--> 갑자기 메쉬에 vertex, edge, face(면)으로 구성됨
각 점선면은 조정가능

단축키 A를 누르면 전체 선택,애
좌상단에 vertex select버튼이 있는데, 드래그나 클릭해서 선택 가능
edge select 버튼 누르면 점이 사라지고 면 나옴
face select 버튼을 누르면 면 선택 가능

점을 선택해서 움직이게 하려면 G를 단축키, G를 누르면 마우스 커서가 바뀌고, 이상태에서 움직이면 움직여짐
3D라서 방향이나 구도가 어색할텐데, 만약 X축으로만 움직이게 하고 싶다면
G를 누르고 움직일 축을 선택하면 됨, X축으로만 이동하겠다고 하면 X를 누르면 됨
--> G + X

양쪽으로 가고 싶다면 한쪽으로만 하게 하기(그게 더 편함)
이동할 때 G + Z를 한다면, 움직일 때 왼쪽 위가 D : 로 숫자 값이 움직이ㅡㄴㄴ데,
G를  + Z 상태에서 2를 누르면 2만큼 움직여짐
(애초에 키다운이 아니라 한번만 누르면 되네)

선도 움직이기 가능, 이 상태에서 tab을 누르면 objectMode로 나가도 유지가 됨
면을 움직이게도 가능

회전은 R임
R, Y(회전축) 으로 하면 Y축 기준으로만 회전을 함

scale은 S, 얘도 ESC를 누르면 취소가 됨, 


특정 축에서만 사이즈 조정도 가능
S, X 를 하면 X축(좌우)로 사이즈 조정 가능

부분적으로 선택해서 변형시켜봤는데,
A를 해서 전체선택을 하면 됨
(그냥 드래그해서 전체 선택을 할 경우 뒤쪽은 선택이 안됨)

A누른상태에서 S를 하면 전체 스케일 조정이 가능

A, X로 모두 지우려 하는데 vertexes 선택하면 다 지워짐(점을 다 지운다는 뜻)

shift + A로 Add가능

가로 세로만 늘리고 싶다면 Scale 조정을 안하고 싶은 축을 shift와 같이 눌러 주면 됨
(위 아래 방향, shift + Z를 누르면 X, Y로만 조정 가능)
높이는 똑같음

object모드에서도 조정이 가능한데, 메쉬 자체의 크기나 모형을 조정하려면 edit 모드에서 하는게 좋음
object모드에서 scale조정을 하면 원래 크기의 2.224만큼이 조정이 된 것
하지만 edit 모드에서 scale조정을 하면 원래 크기 1이 출력되지만, 크기는 커짐
--> 박스는 원래 이 크기라는 뜻, 크기 조정은 웬만하면 edit모드에서 하는게 좋음(얘 자체의 크기를 설정한다는 느낌)

object모드에서 하는건 blender에서 크기가 늘었다 줄었다 하는 걸 만든다던지 할때 좋음
형태 자체를 모델을 만들어서 갖다 쓰려고 하ㅡㄴ거니까, 메쉬 자체의 속성을 변하게 할때는 edit 이 좋음

shift+A를 object모드에서 한다면, G눌러서 빼면, mesh가 두개가 된건데
각각을 선택한 뒤 tab을 누르면 각각 edit모드로 들어갈 수있음

근데 만약 이 두 개 모두가 완성된 mesh의 형태라고 하면
이 두개를 three.js로 갖고 가고 싶다면 mesh를 두개 분리하지 않고, 얘에 edit모드로 들어가서 edit모드 안에서 Add를 해주면 됨
--> 그러면 object모드에서 둘중 하나를 클릭해도 한개의 메쉬로 취급을 해줌
three.js에서 사용할 모델을 만들려고 한다면 하나의 메쉬로 취급을 받게끔 edit모드에서 Add를 해줘야한다는 뜻



------------------------------------
캐릭터 몸통 만들기

캐릭터 만들기
일단 mesh를 이용해서 몸통을 만들건데, 이때 큐브 형태를 많이 활용함
캐릭터 몸통을 네모낳게 말고 부드럽게 만드려면, 우측 패널에 Modifier Properties 클릭, Add Modifier(모디파이어는 이펙트, 특수한 효과를 부여 가능)
여기서 Subviion Surface 클릭, 눌러보면 둥그렇게 변함

levels Viewport, render가 있는데 부드러운 단계를 설정
viewport는 보여지는 레벨, 똑같이 2로 맞추면 좀 더 부드러워짐
2, 2로 맞춰주면 무난함

더 크게 늘려주면 더 부드러워지긴하는데, 이렇게하면 파일 용량이 늘어남
웹에서 사용할거기때문에 성능이 중요함

우클릭, shadeFlat Smooth는 부드러워짐, 원이 울퉁부퉁해지긴 하는데 마음에 안든다면 늘려주면 됨

tab눌러서 edit모드로 들어가기
기본 큐브 형태가 적용되어있음

점을 변형하면 늘어나기도 함


몸통은 동그랗지 않고 직사각형에 가까운 모형일 것임
--> 동그랗지 않고 평평한 기준점같은걸 추가해줘야 함
crtl + R을 누르고 마우스를 가져가면 노란게 생기는데 루프컷?이라고 불림
이상태로 클릭을 하면 두개가 나뉘면서 형태가 두개 붙여놓은 것처럼 변함, 그래서 이 축을 움직이면 밀도?가 달라짐
(종 모양으로 만드는것처럼)

좌우 대칭으로 전체적으로 둥근게 필요해서
crtl+R 상태에서 휠을 돌려보면 개수를 조정할 ㅅ ㅜ있음, 2개에서 클릭을 하고 놔두면 대칭이 됨

3면을 똑같이 해주기
--> 둥그런 직육면체가 됨

크기를 조정해야하는데 Edit모드 안에서,
몸통인데 높이가 2라서, 몸 길이가 몸통은 0.4정도면 좋을 것 같음
A눌러서 전체 선택, S누르고 줄여서 4칸 정도로 바꾸기

폭 조정, A누르고 S, x축으로만 scale 조정을 할거라 x를 누르고 살짝 폭을 줄이기
앞 뒤가 너무 두꺼워서 S, Y후 폭을 X보다 줄ㅇ이기

지우개처럼 너무 네모난 것 같아서
shift를 눌러서 각 모서리를 클릭하고, Z축 빼고 scale조정(더 작게)

shift+Z를 하면 몸통이 동그라짐
팔이 붙을거라 어깨가 연결되는 부분은 안쪽으로 해ㅑ하니까 똒같이 모서리를 클릭하고 scale 조정
s, shift + z후 안쪽으로

배를 튀어나오게, 허리를 들어가게
면 선택으로 (3을 누르면 됨)

앞부분 배를 누르면 G, Y를 해서 적당히 약간만 나오게
허리는 들어가게, 뒷부분 선택, G,Y, 약간 들어가게

tab눌러서 object모드로 가서 확인하고,
튀어나오거나 들어간 부분 양옆의 모서리가 찌그러진 것 같아서 2를 눌러서 edge select로 만들고
양옆의 모서리를 클릭한 후 S, shift+Z, 살짝 앞으로 늘려주기

엉덩이가 처진 것 같아서 올려주기
엉덩이 부분 엣지를 누르고 G, Z, 위로 올려주기
허리도 선택해서 G, z, 올려주기
뒷목은 내려주기, 너무 튀어나와서 G, Y, 안쪽으로 넣어주기



------------------------------
캐릭터 다리 만들기(대칭)

새 메쉬 추가 x, 
이 면에서 다리가 나오게끔(extrude)

원하는 면 선택, 단축키 e 방향에 따라 쑥 들어가게 할 수도 있음

다리를 똑같이 뽑아내야하는데, 높이가 같게 뽑을 수 있지만 세세하게 발가락 모양이나 똑같이 만들기가 어려움

카피해서 똑같이 할 수도 있지만 편리한 기능은, Modifier 중에 mirror가 있음,
탭 눌러서 edit 모드로 들어간 후 extrude 다시 한 번
좌우 대칭으로 가능

다리 길이를 아래 면이 선택된 상태에서 G, Z로 적당히 조정
다리가 홀쭉해보여서, face select에서 앞면 뒷면을 클릭한 후 S, Y로 늘리기

발을 만드려면 앞으로 튀어나와있어야 하는데 면을 선택을 못함
--> 이럴땐 ctrl+R로 면을 자르기, 면을 선택한 후 extrude

아랫배가 너무 튀어나온 것 같아서 edge select를 한 다음 튀어나온 부분, G, Z로 위로하고 Y로 안쪽으로 넣어주기
윗쪽 부분도 G, Z로 밑으로 깎아주기